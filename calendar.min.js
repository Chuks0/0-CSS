function initCalendar(e=!0){const t=new Date(year,month,1),a=new Date(year,month+1,0),n=new Date(year,month,0),c=n.getDate(),i=a.getDate(),l=t.getDay(),d=7-a.getDay()-1;toggleDisable(coachingBtn,!0),date.innerHTML=year+"."+months[month];let o='<div class="calendar_row">',r=0,s=0,v="",m="available";for(let e=l;e>0;e--)r++,o+=`<div day="${r}" class="calendar_item day grey-out prev-date">${c-e+1}</div>`,r>=7&&(s++,r=0,o+=s>=6?"</div>":'</div><div class="calendar_row">');for(let t=1;t<=i;t++){r++,v=availability(r)?m:"";let a=!1;eventsArr.forEach(e=>{if(e.day===t&&e.month===month+1&&e.year===year){let e=new Date;e.getFullYear()<=year&&e.getMonth()<=month&&e.getDate()<=t&&(a=!0)}}),t===(new Date).getDate()&&year===(new Date).getFullYear()&&month===(new Date).getMonth()?(activeDay=t,openPageDay(today.getDay()+1),o+=a?e?`<div day="${r}" class="calendar_item day today active event ${v}">${t}</div>`:`<div day="${r}" class="calendar_item day today event ${v}">${t}</div>`:e?`<div day="${r}" class="calendar_item day today active ${v}">${t}</div>`:`<div day="${r}" class="calendar_item day today ${v}">${t}</div>`):o+=a?`<div day="${r}" class="calendar_item day event ${v}">${t}</div>`:`<div day="${r}" class="calendar_item day ${v}">${t}</div>`,r>=7&&(s++,r=0,o+=s>=6?"</div>":'</div><div class="calendar_row">')}for(let e=1;e<=d;e++)r++,o+=`<div day="${r}" class="calendar_item day grey-out next-date">${e}</div>`,r>=7&&(s++,r=0,o+=s>=6?"</div>":'</div><div class="calendar_row">');for(;s<6;){s++;let e="",t=d+1;for(let a=0;a<7;a++)r++,e+=`<div day="${r}" class="calendar_item day grey-out next-date">${t}</div>`,t++;o+=e,o+=s>=6?"</div>":'</div><div class="calendar_row">'}daysContainer.innerHTML=o,addListner()}function prevMonth(){month--,month<0&&(month=11,year--),initCalendar(!1)}function nextMonth(){month++,month>11&&(month=0,year++),initCalendar(!1)}function addListner(){const e=document.querySelectorAll(".day");e.forEach(t=>{t.addEventListener("click",t=>{activeDay=Number(t.target.innerHTML),e.forEach(e=>{e.classList.remove("active")}),t.target.classList.contains("prev-date")?(prevMonth(),setTimeout(()=>{const e=document.querySelectorAll(".day");e.forEach(e=>{e.classList.contains("prev-date")||e.innerHTML!==t.target.innerHTML||e.classList.add("active")})},100)):t.target.classList.contains("next-date")?(nextMonth(),setTimeout(()=>{const e=document.querySelectorAll(".day");e.forEach(e=>{e.classList.contains("next-date")||e.innerHTML!==t.target.innerHTML||e.classList.add("active")})},100)):t.target.classList.add("active"),openPage(t.target)})})}function todayBtn(){today=new Date,month=today.getMonth(),year=today.getFullYear(),initCalendar()}function updateEvents(e){slotDay=e;let t="";switch(minSetVal){case"1":t=min30(e);break;case"2":t=min60(e);break;case"3":t=min90(e);break;case"4":t=min120(e);break;default:t=min60(e)}""===t&&(t='<div class="no-event">\n            <h3>No Availability</h3>\n        </div>'),eventsContainer.innerHTML=t}function min30(e){let t="";for(let a=0;a<48;a++){let n="00",c="",i=a%2,l=Math.ceil((a+1)/2);1==i&&(n="30");let d=l>12?l%12:l,o=l>=12&&l<24?"PM":"AM";d=0==d?12:d;let r=d+":"+n+" "+o,s=1==i?(d+1>12?1:d+1)+":00"+(l+1>=12&&l+1<24?"PM":"AM"):d+":30 "+o;"s"===weekSlotsArr[e-1][a]&&(c="w--redirected-checked"),"n"!==weekSlotsArr[e-1][a]&&(t+=`<div class="w-checkbox checkbox-wrapper">\n            <div onclick="dateCheck('${e-1}', '${a}','${a+1}', this)"\n            id="${a}"\n            name="${r}"\n            value="${a}"\n            class="w-checkbox-input w-checkbox-input--inputType-custom checkbox-6 ${c}">\n                <div class="checkbox-label-7 w-form-label">${r} - ${s}</div>\n            </div>\n        </div>\n        `)}return t}function min60(e){let t="";for(let a=0;a<48;a++){let n="00",c="",i=a%2,l=Math.ceil((a+1)/2);if(1==i)continue;let d=l>12?l%12:l,o=l>=12&&l<24?"PM":"AM";d=0==d?12:d;let r=d+":"+n+" "+o,s=(d+1>12?1:d+1)+":00"+(l+1>=12&&l+1<24?"PM":"AM");"s"===weekSlotsArr[e-1][a]&&(c="w--redirected-checked"),"n"!==weekSlotsArr[e-1][a]&&(t+=`\n        <div class="w-checkbox checkbox-wrapper">\n            <div onclick="dateCheck('${e-1}', '${a}','${a+2}', this)"\n            id="${a}"\n            name="${r}"\n            value="${a}"\n            class="w-checkbox-input w-checkbox-input--inputType-custom checkbox-6 ${c}">\n                <div class="checkbox-label-7 w-form-label">${r} - ${s}</div>\n            </div>\n        </div>\n        `)}return t}function min90(e){let t="",a=0;for(let n=0;n<48;n++){if(0!=a){a--;continue}a=2;let c="00",i="",l=n%2,d=Math.ceil((n+1)/2);1==l&&(c="30");let o=d>12?d%12:d,r=d>=12&&d<24?"PM":"AM";o=0==o?12:o;let s=o+":"+c+" "+r,v=1==l?(o+2>12?2:o+2)+":00"+(d+2>=12&&d+2<24?"PM":"AM"):o+1+":30 "+r;"s"===weekSlotsArr[e-1][n]&&(i="w--redirected-checked"),"n"!==weekSlotsArr[e-1][n]&&(t+=`\n        <div class="w-checkbox checkbox-wrapper">\n            <div onclick="dateCheck('${e-1}', '${n}','${n+1}', this)"\n            id="${n}"\n            name="${s}"\n            value="${n}"\n            class="w-checkbox-input w-checkbox-input--inputType-custom checkbox-6 ${i}">\n                <div class="checkbox-label-7 w-form-label">${s} - ${v}</div>\n            </div>\n        </div>\n        `)}return t}function min120(e){let t="",a=0;for(let n=0;n<48;n++){if(0!=a){a--;continue}a=3;let c="00",i="",l=Math.ceil((n+1)/2),d=l>12?l%12:l,o=l>=12&&l<24?"PM":"AM";d=0==d?12:d;let r=d+":"+c+" "+o,s=(d+2>12?1:d+2)+":00"+(l+2>=12&&l+2<24?"PM":"AM");"s"===weekSlotsArr[e-1][n]&&(i="w--redirected-checked"),"n"!==weekSlotsArr[e-1][n]&&(t+=`\n        <div class="w-checkbox checkbox-wrapper">\n            <div onclick="dateCheck('${e-1}', '${n}','${n+4}', this)"\n            id="${n}"\n            name="${r}"\n            value="${n}"\n            class="w-checkbox-input w-checkbox-input--inputType-custom checkbox-6 ${i}">\n                <div class="checkbox-label-7 w-form-label">${r} - ${s}</div>\n            </div>\n        </div>\n        `)}return t}function dateCheck(e,t,a,n){try{n!=timeSelected&&timeSelected.classList.remove("w--redirected-checked")}catch{}timeSelected=n,n.classList.contains("w--redirected-checked")?(n.classList.remove("w--redirected-checked"),selectedSlot[0]=null,selectedSlot[1]=null,localStorage.removeItem("timeSelectedDay"),localStorage.removeItem("timeSelectedTime")):(n.classList.add("w--redirected-checked"),selectedSlot[0]=e,selectedSlot[1]=t,localStorage.setItem("timeSelectedDay",e),localStorage.setItem("timeSelectedTime",t)),null!=localStorage.getItem("timeSelectedDay")?coachingBtn.classList.contains("disabled")&&toggleDisable(coachingBtn,!1):coachingBtn.classList.contains("disabled")||toggleDisable(coachingBtn,!0)}function toggleDisable(e,t){t?(e.classList.contains("disabled")||e.classList.add("disabled"),e.style.pointerEvents="none"):(e.classList.contains("disabled")&&e.classList.remove("disabled"),e.style.pointerEvents="auto")}function convertTime(e){let t=e.split(":"),a=t[0],n=t[1],c=a>=12?"PM":"AM";return a=a%12||12,e=a+":"+n+" "+c,e}function openPage(e){let t=e.getAttribute("day");updateEvents(t)}function openPageDay(e){updateEvents(e)}function setTimeSlot(e){let t=e.getAttribute("timeslot");minSet(t)}function setTimeSlotTime(e){minSet(e)}function minSet(e){minSetVal=e,updateEvents(slotDay)}const calendar=document.querySelector(".calendar"),date=document.querySelector(".date"),daysContainer=document.querySelector(".days"),prev=document.querySelector(".prev"),next=document.querySelector(".next"),coachingBtn=document.querySelector(".btn-coaching"),eventsContainer=document.querySelector(".calendar-setup-timeslot"),calendarDays=document.querySelectorAll(".checkbox-wrapper_day-setup"),setupDaysWraper=document.querySelector(".calendar-setup-days-wrapper"),calendarTimes=document.querySelectorAll(".checkbox-timer");let activeDay,today=new Date,month=today.getMonth(),year=today.getFullYear();const months=["01","02","03","04","05","06","07","08","09","10","11","12"],eventsArr=[],weekSlotsArr=[],selectedSlot=[];let timeSelected,minSetVal=0,slotDay=(new Date).getDay();calendarDays.forEach(e=>{e.addEventListener("click",()=>openPage(e))}),calendarTimes.forEach(e=>{e.addEventListener("click",()=>setTimeSlot(e))});const availability=e=>{const t=weekSlotsArr[e-1].find(e=>"a"===e);return null!=t};prev.addEventListener("click",prevMonth),next.addEventListener("click",nextMonth),initCalendar();